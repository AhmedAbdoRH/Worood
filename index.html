<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تطبيق ورود</title>
  <script type="module">
    // 🟢 1. استيراد Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
    // استيراد الدوال اللازمة لـ Firestore
    import { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";

    // 🟢 2. إعداد Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyBt33Ut9nw0WX-DDRi46pB4klvXB8eNe90", // استبدل بمفتاح API الخاص بك
      authDomain: "rhm-banking.firebaseapp.com",
      projectId: "rhm-banking",
      storageBucket: "rhm-banking.appspot.com",
      messagingSenderId: "441668952624",
      appId: "1:441668952624:web:f45150dcdc42c6c48203f5",
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // 🟢 3. تحميل الصور من Firestore عند فتح الموقع
    async function loadImages() {
      const imageContainer = document.getElementById("imageContainer");
      imageContainer.innerHTML = ""; // تفريغ المحتوى قبل تحميل الصور الجديدة
      const querySnapshot = await getDocs(collection(db, "images"));
      const images = [];
      querySnapshot.forEach((docData) => {
        images.push({ id: docData.id, ...docData.data() });
      });

      // ترتيب الصور بناءً على الحقل order
      images.sort((a, b) => (a.order || 0) - (b.order || 0));

      images.forEach((image) => {
        const imageUrl = image.url;
        const docId = image.id; // معرف الوثيقة لحذفها لاحقًا
        const heartsCount = image.hearts || 0; // استرجاع عدد القلوب

        // إنشاء عنصر الصورة
        const imgDiv = document.createElement("div");
        imgDiv.classList.add("image-item");
        imgDiv.setAttribute("data-doc-id", docId); // إضافة معرف الوثيقة كخاصية

        const img = document.createElement("img");
        img.src = imageUrl;
        img.style.width = "200px";
        img.style.margin = "10px";
        img.style.borderRadius = "15px"; // حواف دائرية
        imgDiv.appendChild(img);

        // زر "الحمد لله" مع التفاعل
        const heartButton = document.createElement("button");
        heartButton.classList.add("heart-button");
        heartButton.innerHTML = "الحمد لله ❤️"; // نص الزر
        heartButton.onclick = function() {
          const currentHeartCount = parseInt(heartButton.closest('.image-item').querySelector('.count-button').innerHTML) || 0;
          const newHeartCount = currentHeartCount + 1;
          updateHeartCount(docId, newHeartCount); // تحديث عدد القلوب في Firestore
          // Find the count button within this image-item and update its text
          const currentImageItem = heartButton.closest('.image-item');
          const countButton = currentImageItem.querySelector('.count-button');
          if (countButton) {
              countButton.innerHTML = newHeartCount; // تحديث العداد في الواجهة
          }
          heartButton.classList.add("clicked"); // إضافة كلاس للتفاعل
          setTimeout(() => heartButton.classList.remove("clicked"), 300); // إزالة الكلاس بعد 300ms
        };
        imgDiv.appendChild(heartButton);

        // زر العداد (غير قابل للتفاعل)
        const countButton = document.createElement("button");
        countButton.classList.add("count-button");
        countButton.innerHTML = heartsCount; // عرض عدد القلوب
        countButton.disabled = true; // تعطيل التفاعل مع الزر
        imgDiv.appendChild(countButton);

        // زر الحذف
        const deleteButton = document.createElement("button");
        deleteButton.classList.add("delete-button");
        deleteButton.innerHTML = "حذف";
        deleteButton.onclick = function() {
          deleteImage(docId);
        };
        imgDiv.appendChild(deleteButton);

        // زر تحميل الصورة الأصلية
        const downloadButton = document.createElement("button");
        downloadButton.classList.add("download-button");
        downloadButton.innerHTML = "️️️تنزيل";
        downloadButton.onclick = function() {
          downloadImage(imageUrl);
        };
        imgDiv.appendChild(downloadButton);

        // زر رفع الصورة لأعلى (أعلى يسار)
        const moveUpButton = document.createElement("button");
        moveUpButton.classList.add("move-button", "move-up-button");
        moveUpButton.innerHTML = " "; // تغيير الرمز ليكون أوضح
        moveUpButton.onclick = function() {
          moveImageUp(imgDiv);
        };
        imgDiv.appendChild(moveUpButton);

        // زر إنزال الصورة لأسفل (أعلى يمين)
        const moveDownButton = document.createElement("button");
        moveDownButton.classList.add("move-button", "move-down-button");
        moveDownButton.innerHTML = " "; // تغيير الرمز ليكون أوضح
        moveDownButton.onclick = function() {
          moveImageDown(imgDiv);
        };
        imgDiv.appendChild(moveDownButton);

        // إضافة الصورة إلى الحاوية
        imageContainer.appendChild(imgDiv);
      });
    }

    // 🟢 4. تحديث عدد القلوب للصور في Firestore
    async function updateHeartCount(docId, newHeartCount) {
        try {
            const imageRef = doc(db, "images", docId);
            await updateDoc(imageRef, { hearts: newHeartCount });
        } catch (error) {
            console.error("Error updating image heart count: ", error);
            alert("حدث خطأ أثناء تحديث عدد القلوب للصورة.");
        }
    }

    // 🟢 5. حذف الصورة من Firestore
    async function deleteImage(docId) {
        try {
            if (!confirm("هل أنت متأكد من حذف هذه الصورة؟")) return; // تأكيد الحذف
            const imageRef = doc(db, "images", docId);
            await deleteDoc(imageRef);
            loadImages(); // إعادة تحميل الصور بعد الحذف
        } catch (error) {
            console.error("Error deleting image: ", error);
            alert("حدث خطأ أثناء حذف الصورة.");
        }
    }

    // 🟢 6. تحميل الصورة الأصلية
    async function downloadImage(imageUrl) {
      try {
        // جلب الصورة كـ Blob
        const response = await fetch(imageUrl, {
          mode: 'cors', // التعامل مع CORS
        });
        if (!response.ok) {
             throw new Error(`HTTP error! status: ${response.status}`);
        }
        const blob = await response.blob();

        // إنشاء رابط تحميل
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;

        // استخراج اسم الملف أو استخدام اسم افتراضي
        const filename = imageUrl.split('/').pop().split('?')[0] || 'image.jpg';
        a.download = filename;

        // محاكاة النقر للتنزيل
        document.body.appendChild(a);
        a.click();

        // تنظيف
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
      } catch (error) {
        console.error("خطأ أثناء تحميل الصورة:", error);
        alert("حدث خطأ أثناء تحميل الصورة. قد تكون هناك مشكلة في الوصول إلى رابط الصورة أو CORS.");
      }
    }

    // 🟢 7. تحريك الصورة لأعلى وتحديث الترتيب في Firestore
    async function moveImageUp(imgDiv) {
      const prevElement = imgDiv.previousElementSibling;
      if (prevElement) {
        imgDiv.parentNode.insertBefore(imgDiv, prevElement);
        await updateImageOrder(); // تحديث الترتيب في Firestore
      }
    }

    // 🟢 8. تحريك الصورة لأسفل وتحديث الترتيب في Firestore
    async function moveImageDown(imgDiv) {
      const nextElement = imgDiv.nextElementSibling;
      if (nextElement) {
        imgDiv.parentNode.insertBefore(nextElement, imgDiv);
        await updateImageOrder(); // تحديث الترتيب في Firestore
      }
    }

    // 🟢 9. تحديث ترتيب الصور في Firestore
    async function updateImageOrder() {
        try {
            const imageContainer = document.getElementById("imageContainer");
            const images = imageContainer.querySelectorAll(".image-item");

            const updates = []; // مصفوفة لتجميع عمليات التحديث
            for (let i = 0; i < images.length; i++) {
                const docId = images[i].getAttribute("data-doc-id"); // الحصول على معرف الوثيقة
                if (docId) { // التأكد من وجود معرف المستند
                    const imageRef = doc(db, "images", docId);
                    const currentOrder = i; // استخدام الفهرس الحالي كأساس للترتيب
                    updates.push(updateDoc(imageRef, { order: currentOrder })); // تحديث الترتيب بدءًا من 0
                } else {
                    console.warn("Image item missing data-doc-id:", images[i]);
                }
            }
            // تنفيذ جميع عمليات التحديث معًا
            if (updates.length > 0) {
               await Promise.all(updates);
            }
            // لا داعي لإعادة تحميل الصور هنا لأن الترتيب تم بالفعل في الواجهة
            // loadImages(); // يمكن إزالة هذا السطر إذا لم تكن هناك حاجة ماسة لإعادة التحميل
        } catch (error) {
            console.error("Error updating image order: ", error);
            alert("حدث خطأ أثناء تحديث ترتيب الصور.");
        }
    }

    // 🟢 10. رفع الصورة تلقائيًا عند اختيارها
    document.getElementById("fileInput").addEventListener("change", async () => {
      const fileInput = document.getElementById("fileInput");
      if (!fileInput.files.length) {
        // لا داعي لإظهار تنبيه إذا لم يتم اختيار ملف
        return;
      }

      const file = fileInput.files[0];
      const formData = new FormData();
      formData.append("image", file);

      const clientId = "0a4e691f4781a44"; // استبدل بـ Client-ID الصحيح لـ Imgur

      // إظهار مؤشر تحميل أو تعطيل الزر (اختياري)
      const uploadButtonLabel = document.querySelector('.upload-btn');
      uploadButtonLabel.textContent = '⏳'; // تغيير مؤقت للأيقونة
      uploadButtonLabel.style.pointerEvents = 'none'; // تعطيل النقر أثناء الرفع

      try {
        // --- رفع الصورة إلى Imgur ---
        const response = await fetch("https://api.imgur.com/3/upload", {
          method: "POST",
          headers: { "Authorization": `Client-ID ${clientId}` },
          body: formData
        });

        const data = await response.json();
        if (!data.success) {
          throw new Error(data.data.error || "حدث خطأ أثناء رفع الصورة إلى Imgur.");
        }

        const imageUrl = data.data.link;

        // --- الحصول على عدد الصور الحالية لتحديد الترتيب التالي ---
        const imageContainer = document.getElementById("imageContainer");
        const currentImageCount = imageContainer.querySelectorAll(".image-item").length;

        // --- إضافة الصورة الجديدة بالترتيب الصحيح إلى Firestore ---
        // الترتيب الجديد سيكون هو عدد الصور الحالية (يبدأ من 0)
        await addDoc(collection(db, "images"), {
            url: imageUrl,
            hearts: 0,
            order: currentImageCount // الترتيب الجديد
        });

        loadImages(); // إعادة تحميل الصور لإظهار الصورة الجديدة والمحافظة على الترتيب

      } catch (error) {
        console.error("خطأ أثناء رفع الصورة:", error);
        alert(`حدث خطأ أثناء رفع الصورة: ${error.message}. تحقق من وحدة التحكم.`);
      } finally {
        // إعادة تعيين حقل الإدخال للسماح برفع نفس الملف مرة أخرى إذا لزم الأمر
        fileInput.value = '';
        // إعادة الزر إلى حالته الطبيعية
        uploadButtonLabel.textContent = '+';
        uploadButtonLabel.style.pointerEvents = 'auto';
      }
    });

    // --------------------------------------------------
    // --- وظائف حفظ وتحميل النص القابل للتعديل وقلوبه ---
    // --------------------------------------------------

    // معرف المستند الذي سيتم تخزين النص والقلوب فيه
    const textDocId = "mainContent"; // يمكنك تغيير هذا الاسم
    const textCollectionName = "userText"; // اسم المجموعة للنص والقلوب

    // 🟢 11. حفظ النص في Firestore
    async function saveText(text) {
      try {
        const textRef = doc(db, textCollectionName, textDocId);
        // استخدام merge: true للحفاظ على حقل القلوب عند تحديث النص فقط
        await setDoc(textRef, { content: text }, { merge: true });
        console.log("Text saved successfully!");
      } catch (error) {
        console.error("Error saving text: ", error);
        // لا تعرض تنبيه للمستخدم عند الحفظ التلقائي لتجنب الإزعاج
        // alert("حدث خطأ أثناء حفظ النص.");
      }
    }

    // 🟢 12. تحميل النص وعدد القلوب من Firestore
    async function loadTextAndHearts() {
      const editableDiv = document.getElementById("editableText");
      const textHeartCountSpan = document.getElementById("textHeartCount");
      try {
        const textRef = doc(db, textCollectionName, textDocId);
        const docSnap = await getDoc(textRef);

        if (docSnap.exists()) {
          const data = docSnap.data();
          editableDiv.innerHTML = data.content || "اكتب هنا..."; // استخدام innerHTML للحفاظ على تنسيق بسيط مثل فواصل الأسطر
          textHeartCountSpan.textContent = data.hearts || 0; // تحميل عدد القلوب أو 0
        } else {
          // النص والقلوب الافتراضية إذا لم يتم العثور على مستند
          editableDiv.innerHTML = "اكتب هنا...";
          textHeartCountSpan.textContent = 0;
          console.log("No such document! Displaying default text and 0 hearts.");
          // يمكنك إنشاء المستند هنا بالقيم الافتراضية إذا أردت
          // await setDoc(textRef, { content: "اكتب هنا...", hearts: 0 });
        }
      } catch (error) {
        console.error("Error loading text and hearts: ", error);
        // الحفاظ على النص الافتراضي والقلوب في حالة حدوث خطأ
        editableDiv.innerHTML = "اكتب هنا...";
        textHeartCountSpan.textContent = 0;
        alert("حدث خطأ أثناء تحميل النص والقلوب.");
      }
    }

    // 🟢 13. إضافة مستمع حدث لحفظ النص عند فقدان التركيز (blur)
    function setupTextSaving() {
        const editableDiv = document.getElementById("editableText");
        if (editableDiv) {
            editableDiv.addEventListener("blur", () => {
                saveText(editableDiv.innerHTML); // حفظ محتوى HTML
            });
        } else {
            console.error("Editable text element not found!");
        }
    }

    // 🟢 14. تحديث عدد قلوب النص في Firestore
    async function updateTextHeartCount(newCount) {
      try {
        const textRef = doc(db, textCollectionName, textDocId);
        await setDoc(textRef, { hearts: newCount }, { merge: true }); // استخدام setDoc مع merge لتحديث أو إضافة حقل القلوب
        console.log("Text hearts updated successfully!");
      } catch (error) {
        console.error("Error updating text hearts: ", error);
        alert("حدث خطأ أثناء تحديث عدد قلوب النص.");
      }
    }

    // 🟢 15. إعداد أزرار تفاعل النص (القلب وإعادة الضبط)
    function setupTextActions() {
        const heartButton = document.getElementById("textHeartButton");
        const resetButton = document.getElementById("resetTextHeartsButton");
        const countSpan = document.getElementById("textHeartCount");

        if (heartButton && resetButton && countSpan) {
            // إضافة قلب
            heartButton.addEventListener("click", () => {
                let currentCount = parseInt(countSpan.textContent) || 0;
                currentCount++;
                countSpan.textContent = currentCount;
                updateTextHeartCount(currentCount); // تحديث Firestore
                // إضافة تأثير النبض
                heartButton.classList.add("clicked");
                setTimeout(() => heartButton.classList.remove("clicked"), 300);
            });

            // إعادة ضبط العداد بدون تأكيد
            resetButton.addEventListener("click", () => {
                countSpan.textContent = 0;
                updateTextHeartCount(0); // تحديث Firestore
            });
        } else {
            console.error("Text action buttons or counter span not found!");
        }
    }

    // --------------------------------------------------
    // --- حركة الفراشة ---
    // --------------------------------------------------
    function moveButterfly() {
        const butterfly = document.getElementById('butterfly');
        if (!butterfly) return;

        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const butterflySize = 50; // حجم الفراشة التقريبي

        // حساب المواقع العشوائية مع الأخذ في الاعتبار حجم الفراشة وشريط التمرير المحتمل
        const randomX = Math.random() * (viewportWidth - butterflySize - 20); // 20 بكسل هامش إضافي
        const randomY = Math.random() * (viewportHeight - butterflySize - 20); // 20 بكسل هامش إضافي

        // التأكد من أن القيم ليست سالبة
        const finalX = Math.max(10, randomX); // 10 بكسل هامش أدنى
        const finalY = Math.max(10, randomY); // 10 بكسل هامش أدنى

        // تطبيق الموقع الجديد
        butterfly.style.left = `${finalX}px`;
        butterfly.style.top = `${finalY}px`;
    }

    // بدء تحريك الفراشة كل بضع ثوانٍ
    function startButterflyMovement() {
        // تحريك الفراشة فورًا عند التحميل
        moveButterfly();
        // ثم تحريكها كل 8 ثوانٍ
        setInterval(moveButterfly, 8000); // 8000 ميلي ثانية = 8 ثوانٍ
    }


    // --------------------------------------------------
    // --- تحميل البيانات عند بدء تشغيل الصفحة ---
    // --------------------------------------------------
    document.addEventListener("DOMContentLoaded", () => {
      loadImages();         // تحميل الصور
      loadTextAndHearts();  // تحميل النص المحفوظ وعدد القلوب
      setupTextSaving();    // إعداد الحفظ التلقائي للنص
      setupTextActions();   // إعداد أزرار تفاعل النص
      startButterflyMovement(); // بدء حركة الفراشة
    });

    // تحديث موقع الفراشة عند تغيير حجم النافذة
    window.addEventListener('resize', moveButterfly);


</script>

<style>

body {

font-family: Arial, sans-serif;

text-align: center;

margin: 0;

padding: 0;

background: linear-gradient(135deg, #223D0A, #192705, #323B04); /* تدرج أخضر داكن */

color: rgb(80, 100, 80); /* لون نص أفتح للقراءة على خلفية خضراء */

min-height: 100vh;

display: flex;

flex-direction: column;

justify-content: flex-start;

align-items: center;

background-size: cover; /* تغطية كاملة للصفحة */

overflow-x: hidden; /* منع ظهور شريط التمرير الأفقي بسبب الفراشة */

}



h1 {

color: #FFA500; /* اللون الأصفر البرتقالي */

font-size: 2.5rem;

margin-top: 20px;

animation: fadeIn 1s ease-in-out;

}



h1::after {

content: " ❤️"; /* إضافة رمز قلب */

}



/* تصميم زر رفع الصورة */

#fileInput {

display: none; /* إخفاء المدخل الافتراضي */

}



.upload-btn {

position: fixed;

bottom: 50px;

left: 50px; /* تعديل الموقع ليكون في الأسفل اليسار */

width: 60px;

height: 60px;

border-radius: 50%;

background-color: rgba(255, 255, 255, 0.103); /* خلفية شفافة أكثر */

color: #ffffff9f; /* اللون الأبيض */

font-size: 30px;

display: flex;

justify-content: center;

align-items: center;

cursor: pointer;

box-shadow: 0 5px 15px rgba(167, 167, 167, 0.041);

transition: all 0.3s ease;

border: 2px solid #cfcfcf88; /* إطار أسود فراني */

animation: bounce 2s infinite;

z-index: 100; /* لضمان ظهوره فوق العناصر الأخرى */

}



.upload-btn:hover {

background-color: rgba(58, 58, 58, 0.6); /* زيادة الشفافية عند التمرير */

transform: scale(1.1);

}



button {

margin: 5px;

padding: 10px;

cursor: pointer;

}



/* تصميم زر الحمد لله */

.heart-button {

position: absolute;

bottom: -30px;

left: 10px; /* زر الحمد لله على اليسار */

background: rgba(255, 255, 255, 0.2);

border: none;

padding: 4px 10px;

border-radius: 10px 0 0 10px; /* حواف دائرية على اليسار فقط */

color: #FFA500;

font-size: 12px;

cursor: pointer;

transition: all 0.2s ease;

direction: rtl;

display: flex;

align-items: center;

gap: 3px;

height: 30px; /* نفس ارتفاع زر العداد */

}



.heart-button:hover {

background: rgba(255, 165, 0, 0.3); /* تعديل تأثير التحويم */

}



.heart-button.clicked {

animation: pulse 0.3s ease-in-out; /* تأثير النبض عند الضغط */

}



@keyframes pulse {

0% { transform: scale(1); }

50% { transform: scale(1.1); }

100% { transform: scale(1); }

}



/* تصميم زر العداد */

.count-button {

position: absolute;

bottom: -30px;

left: 92px; /* ملتصق بجانب زر الحمد لله من اليمين */

background: rgba(255, 255, 255, 0.2); /* نفس خلفية زر الحمد لله */

border: none;

padding: 4px 10px;

border-radius: 0 10px 10px 0; /* حواف دائرية على اليمين فقط */

color: #FFA500;

font-size: 12px;

cursor: default; /* لا يتفاعل مع المؤشر */

pointer-events: none; /* تعطيل التفاعل */

display: flex;

align-items: center;

justify-content: center;

height: 30px; /* نفس ارتفاع زر الحمد لله */

}



/* تعديل تنسيقات زر الحذف */

.delete-button {

position: absolute;

bottom: -30px; /* محاذاة مع الأزرار الأخرى */

right: 49px; /* وضع الزر بين زر العداد وزر التنزيل (قيمة تقديرية) */

background-color: rgba(255, 255, 255, 0); /* خلفية شفافة قليلاً باللون الأبيض */

border: none;

padding: 4px 10px; /* إضافة حشو ليكون الزر مرئياً */

border-radius: 10px; /* حواف دائرية */

color: rgba(255, 255, 255, 0.1); /* لون النص أبيض شفاف قليلاً */

font-size: 12px; /* حجم خط مطابق للأزرار الأخرى */

cursor: pointer;

width: auto; /* السماح للعرض بالتكيف مع المحتوى */

height: auto; /* السماح للارتفاع بالتكيف مع المحتوى */

opacity: 0.4; /* إظهار الزر قليلاً بشكل دائم */

transition: opacity 0.3s ease; /* جعل الانتقال أسرع */

}



.delete-button:hover {

opacity: 0.8; /* زيادة الشفافية عند التمرير ليصبح أكثر وضوحًا */

}





/* تصميم زر التحميل */

.download-button {

position: absolute;

bottom: -30px;

right: 10px; /* وضع الزر في أسفل اليمين */

background: rgba(255, 255, 255, 0.2);

border: none;

padding: 4px 10px;

border-radius: 10px;

color: #FFFFFF;

font-size: 12px;

cursor: pointer;

transition: all 0.2s ease;

height: 30px;

}



.download-button:hover {

background: rgba(255, 165, 0, 0.3);

}



.move-button {

position: absolute;

top: 10px;

background-color: rgba(255, 255, 255, 0); /* شفافية */

border: none;

padding: 5px;

cursor: pointer;

border-radius: 50%;

font-size: 29px;

opacity: 0.7;

transition: opacity 0.3s ease;

}



.move-up-button {

right: 10px; /* زر الرفع في أعلى يسار */

}



.move-down-button {

left: 10px; /* زر الإنزال في أعلى يمين */

}



.move-button:hover {

opacity: 1;

}



.image-item {

position: relative;

display: inline-block;

margin: 30px; /* زيادة المسافة بين الصور */

animation: slideIn 0.5s ease-in-out;

}



.image {

border-radius: 15px; /* حواف دائرية */

width: 100%;

max-width: 200px;

height: auto;

}



#imageContainer {

display: flex;

flex-wrap: wrap;

justify-content: center;

padding: 10px;

width: 100%;

padding-bottom: 60px;

}



/* تحسين التوافق مع الأجهزة المحمولة */

@media (max-width: 600px) {

h1 {

font-size: 2rem;

}



.upload-btn {

bottom: 50px;

left: 50px;

width: 50px;

height: 50px;

font-size: 30px;

}



.image-item {

margin: 20px;

}



#imageContainer {

flex-direction: column;

align-items: center;

}



.image {

max-width: 330px;

}



button {

font-size: 15px;

}

}



/* النص في أسفل الصفحة */

.footer-text {

position: fixed;

bottom: 0;

left: 0;

width: 100%;

background-color: #052720; /* أخضر داكن جدًا ليتناسب مع الخلفية */

color: white;

font-size: 12px;

text-align: center;

padding: 10px;

}



/* أنيميشن ظهور العناصر */

@keyframes fadeIn {

from { opacity: 0; }

to { opacity: 1; }

}



@keyframes slideIn {

from { transform: translateY(20px); opacity: 0; }

to { transform: translateY(0); opacity: 1; }

}



@keyframes bounce {

0%, 100% { transform: translateY(0); }

50% { transform: translateY(-1px); }

}



/* أنيميشن للوجو */

.logo {

width: 120px;

height: auto;

margin-top: 40px; /* مسافة بسيطة بين اللوجو وأعلى الصفحة */

animation: float 4s ease-in-out infinite;

}



@keyframes float {

0%, 100% { transform: translateY(0); }

50% { transform: translateY(-3px); }

}



/* --- تنسيقات إضافية للنص القابل للتعديل --- */

#editableTextContainer { /* حاوية للنص للمزيد من التحكم */

padding: 4px; /* تقليل الحشو الداخلي */

border-radius: 4px;

box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* تخفيف الظل */

max-width: 60%; /* عرض أقصى بنسبة مئوية */

width: 800px; /* الحفاظ على عرض محدد للشاشات الكبيرة */

margin: 10px auto; /* تقليل الهامش العلوي */

font-family: Arial, sans-serif;

direction: rtl;

color: white;

background-color: rgba(255, 255, 255, 0.01); /* خلفية شفافة قليلاً */

}



#editableText { /* العنصر القابل للتعديل نفسه */

padding: 40px;

min-height: 10px; /* ارتفاع أدنى أصغر */

outline: none; /* إزالة الإطار عند التركيز */

border-radius: 8px;

color: #E0E0E0; /* لون نص أفتح قليلاً */

line-height: 1.6; /* تحسين قابلية القراءة */

text-align: center; /* محاذاة النص لليمين */

background: transparent; /* جعل الخلفية الداخلية شفافة */

}



/* تغيير مؤشر الماوس للإشارة إلى قابلية التعديل */

#editableText:focus {

box-shadow: 0 0 5px rgba(255, 165, 0, 0.5); /* ظل برتقالي خفيف عند التركيز */

}

/* مؤشر الكتابة */

#editableText[contenteditable="true"] {

cursor: text;

}



/* --- تنسيقات الفراشة --- */

#butterfly {

position: fixed; /* لتثبيتها بالنسبة لإطار العرض */

width: 55px; /* حجم صغير */

height: auto;

z-index: 999; /* لضمان ظهورها فوق معظم العناصر */

/* زيادة مدة الانتقال لجعل الحركة أبطأ */

/* إضافة transform إلى الانتقال */

transition: top 5s linear, left 6s linear, transform 0.7s ease-in-out;

pointer-: none; /* تجاهل أحداث الماوس */

transform-origin: center center; /* نقطة ارتكاز التحويل في المنتصف */

/* تطبيق أنيميشن الرفرفة */

animation: flapping 1.5s ease-in-out infinite; /* مدة الأنميشن 1.5 ثانية، تكرار لا نهائي */

}



/* أنيميشن رفرفة الجناح */

@keyframes flapping {

50%, 120% { transform: scaleX(1); } /* الحجم الطبيعي */

50% { transform: scaleX(0.7); } /* يتقلص عرضيًا في المنتصف */

  
  
#textHeartButton {
  background-color: transparent; /* Makes the button background fully invisible */
  border: none; /* Remove default border */
  color: rgba(255, 255, 255, 0.4); /* Sets the color of the icon/text to white with 60% opacity */
  /* Adjust the '0.6' value (between 0 and 1) for more or less transparency on the icon */
  /* You might also need to set font-size if it's not inherited */
  font-size: inherit;
  margin-top: 0px;

}

  /* أو أي قيمة صغيرة أخرى تناسبك */
  /* يمكنك تعيينها إلى 0 إذا أردت أن تكون ملتصقة تماماً */
#"text-action-button {
  background-color: transparent; /* Makes the button background fully invisible */
  border: none; /* Remove default border */
  color: rgba(255, 255, 255, 0.1); /* Sets the color of the icon/text to white with 60% opacity */

}


</style>
</head>
<body>

  <img src="logo.png" alt="شعار تطبيق ممتن" class="logo">

  <div id="editableTextContainer">
      <div id="editableText" contenteditable="true">
          </div>
  </div>

  <div 
      <button id="textHeartButton" class="text-action-button">❤️</button>
      <span id="textHeartCount" class="text-heart-count">0</span> <button id="resetTextHeartsButton"
class="text-action-button">↻</button> </div>


  <input type="file" id="fileInput" accept="image/*">
  <label for="fileInput" class="upload-btn">+</label>

  <div id="imageContainer">
      </div>

  <img src="fly.png" alt="فراشة متحركة" id="butterfly">

</body>
</html>